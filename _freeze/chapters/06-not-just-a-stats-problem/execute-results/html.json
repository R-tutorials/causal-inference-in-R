{
  "hash": "9afee1a32d0cbfd07aacc46f4cfada52",
  "result": {
    "markdown": "# Causal inference is not (just) a statistical problem {#sec-quartets}\n\n\n\n\n\n## The Causal Quartet\n\nWe now have the tools to look at a detail of causal inference alluded to thus far in the book: causal inference is not (just) a statistical problem.\nOf course, we use statistics to answer causal questions.\nIt's necessary to answer most questions, even if the statistics are basic (as they often are in randomized designs).\nBut statistics alone do not allow us to address all of the assumptions of causal inference.\n\nIn 1973, Francis Anscombe introduced a set of four datasets known as *Anscombe's Quartet*.\nThese data illustrated an important lesson: summary statistics alone cannot help you understand data; you also need to visualize your data.\nIn the plots in @fig-anscombe, each data set has remarkably similar summary statistics, including means and correlations that are nearly identical.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(quartets)\n\nanscombe_quartet |> \n  ggplot(aes(x, y)) + \n  geom_point() + \n  geom_smooth(method = \"lm\", se = FALSE) + \n  facet_wrap(~ dataset)\n```\n\n::: {.cell-output-display}\n![Anscombe's Quartet, a set of four datasets with nearly identical summary statistics. Anscombe's point was that one must visualize the data to understand it.](06-not-just-a-stats-problem_files/figure-html/fig-anscombe-1.png){#fig-anscombe width=672}\n:::\n:::\n\n\nThe Datasaurus Dozen is a modern take on Anscombe's Quartet. The mean, standard deviation, and correlation are nearly identical in each dataset, but the visualizations are very different.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(datasauRus)\n\n# roughly the same correlation in each dataset\ndatasaurus_dozen |> \n  group_by(dataset) |> \n  summarize(cor = round(cor(x, y), 3))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 13 Ã— 2\n   dataset       cor\n   <chr>       <dbl>\n 1 away       -0.064\n 2 bullseye   -0.069\n 3 circle     -0.068\n 4 dino       -0.064\n 5 dots       -0.06 \n 6 h_lines    -0.062\n 7 high_lines -0.069\n 8 slant_down -0.069\n 9 slant_up   -0.069\n10 star       -0.063\n11 v_lines    -0.069\n12 wide_lines -0.067\n13 x_shape    -0.066\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndatasaurus_dozen |> \n  ggplot(aes(x, y)) + \n  geom_point() + \n  facet_wrap(~ dataset)\n```\n\n::: {.cell-output-display}\n![The Datasaurus Dozen, a set of datasets with nearly identical summary statistics. The Datasaurus Dozen is a modern version of Anscombe's Quartet. It's actually a baker's dozen, but who's counting?](06-not-just-a-stats-problem_files/figure-html/fig-datasaurus-1.png){#fig-datasaurus width=672}\n:::\n:::\n\n\nIn causal inference, though, even visualization is not enough to untangle causal effects.\nBackground knowledge, as we visualized in DAGs in @sec-dags, is required to meet the assumptions of causal inference.\n\nIn 2023, we introduced the *causal quartet* [@dagostinomcgowan2023].\nThe causal quartet has many of the same properties of Anscombe's quartet and the Datasaurus Dozen: the numerical summaries of the variables in the dataset are basically the same.\nUnlike these data, the causal quartet also *look* the same as each other.\nThe difference is the causal structure that generated each dataset.\n@fig-causal_quartet_hidden shows four datasets where the observational relationship between `exposure` and `outcome` is virtually identical.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncausal_quartet |> \n  # hide the dataset names\n  mutate(dataset = as.integer(factor(dataset))) |> \n  ggplot(aes(exposure, outcome)) + \n  geom_point() + \n  geom_smooth(method = \"lm\", se = FALSE) + \n  facet_wrap(~ dataset)\n```\n\n::: {.cell-output-display}\n![The Causal Quartet, four data sets with nearly identical summary statistics and visualizations. The causal structure of each dataset is different, and data alone cannot tell us which is which.](06-not-just-a-stats-problem_files/figure-html/fig-causal_quartet_hidden-1.png){#fig-causal_quartet_hidden width=672}\n:::\n:::\n\n\nThe question for each dataset is whether to adjust for a third variable, `covariate`.\nIs `covariate` a confounder?\nA mediator?\nA collider?\nWe can't use data to figure this problem out.\nIn @tbl-quartet_lm, it's not clear which effect is right.\nLikewise, the correlation between `exposure` and `covariate` is no help: it's the same!\n\n\n::: {#tbl-quartet_lm .cell tbl-cap='The causal quartet, with the estimated effect of `exposure` on `outcome` with and without adjustment for `covariate`. The unadjusted estimate is identical for all four datasets, as is the correlation between `exposure` and `covariate`. The adjusted estimate varies. Without background knowledge, it\\'s not clear which is right.'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"sdpdsmvewg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#sdpdsmvewg table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#sdpdsmvewg thead, #sdpdsmvewg tbody, #sdpdsmvewg tfoot, #sdpdsmvewg tr, #sdpdsmvewg td, #sdpdsmvewg th {\n  border-style: none;\n}\n\n#sdpdsmvewg p {\n  margin: 0;\n  padding: 0;\n}\n\n#sdpdsmvewg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#sdpdsmvewg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#sdpdsmvewg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#sdpdsmvewg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#sdpdsmvewg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#sdpdsmvewg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#sdpdsmvewg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#sdpdsmvewg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#sdpdsmvewg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#sdpdsmvewg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#sdpdsmvewg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#sdpdsmvewg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#sdpdsmvewg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#sdpdsmvewg .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#sdpdsmvewg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sdpdsmvewg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#sdpdsmvewg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#sdpdsmvewg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#sdpdsmvewg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sdpdsmvewg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#sdpdsmvewg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sdpdsmvewg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#sdpdsmvewg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sdpdsmvewg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#sdpdsmvewg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sdpdsmvewg .gt_left {\n  text-align: left;\n}\n\n#sdpdsmvewg .gt_center {\n  text-align: center;\n}\n\n#sdpdsmvewg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#sdpdsmvewg .gt_font_normal {\n  font-weight: normal;\n}\n\n#sdpdsmvewg .gt_font_bold {\n  font-weight: bold;\n}\n\n#sdpdsmvewg .gt_font_italic {\n  font-style: italic;\n}\n\n#sdpdsmvewg .gt_super {\n  font-size: 65%;\n}\n\n#sdpdsmvewg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#sdpdsmvewg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#sdpdsmvewg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#sdpdsmvewg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#sdpdsmvewg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#sdpdsmvewg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#sdpdsmvewg .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Dataset\">Dataset</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Not adjusting for `covariate`\">Not adjusting for `covariate`</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Adjusting for `covariate`\">Adjusting for `covariate`</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Correlation of `exposure` and `covariate`\">Correlation of `exposure` and `covariate`</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">1</td>\n<td headers=\"Not adjusting for `covariate`\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"Adjusting for `covariate`\" class=\"gt_row gt_right\">0.55</td>\n<td headers=\"Correlation of `exposure` and `covariate`\" class=\"gt_row gt_right\">0.70</td></tr>\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">2</td>\n<td headers=\"Not adjusting for `covariate`\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"Adjusting for `covariate`\" class=\"gt_row gt_right\">0.50</td>\n<td headers=\"Correlation of `exposure` and `covariate`\" class=\"gt_row gt_right\">0.70</td></tr>\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">3</td>\n<td headers=\"Not adjusting for `covariate`\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"Adjusting for `covariate`\" class=\"gt_row gt_right\">0.00</td>\n<td headers=\"Correlation of `exposure` and `covariate`\" class=\"gt_row gt_right\">0.70</td></tr>\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">4</td>\n<td headers=\"Not adjusting for `covariate`\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"Adjusting for `covariate`\" class=\"gt_row gt_right\">0.88</td>\n<td headers=\"Correlation of `exposure` and `covariate`\" class=\"gt_row gt_right\">0.70</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n::: {.callout-warning}\n\n## The ten percent rule\n\nThe ten percent rule is a common technique in epidemiology and other fields to determine whether a variable is a confounder. The problem is, it doesn't work. The ten percent rule says that you should include a variable in your model if including it changes the effect estimate by more than ten percent. However, *every* example in the causal quartet causes a change of more than ten percent. As we know, this leads to the wrong answer in some of the datasets. Even the reverse technique, *disincluding* a variable when it's *less* than ten percent, can cause trouble because many small confounding effects can add up to larger bias. \n\n\n::: {#tbl-quartet_ten_percent .cell tbl-cap='The percent change in the coefficient for `exposure` when including `covariate` in the model.'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"efumidugxw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#efumidugxw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#efumidugxw thead, #efumidugxw tbody, #efumidugxw tfoot, #efumidugxw tr, #efumidugxw td, #efumidugxw th {\n  border-style: none;\n}\n\n#efumidugxw p {\n  margin: 0;\n  padding: 0;\n}\n\n#efumidugxw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#efumidugxw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#efumidugxw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#efumidugxw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#efumidugxw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#efumidugxw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efumidugxw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#efumidugxw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#efumidugxw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#efumidugxw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#efumidugxw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#efumidugxw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#efumidugxw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#efumidugxw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#efumidugxw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#efumidugxw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#efumidugxw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#efumidugxw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#efumidugxw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efumidugxw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#efumidugxw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#efumidugxw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#efumidugxw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efumidugxw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#efumidugxw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#efumidugxw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efumidugxw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efumidugxw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#efumidugxw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efumidugxw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#efumidugxw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#efumidugxw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#efumidugxw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efumidugxw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#efumidugxw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#efumidugxw .gt_left {\n  text-align: left;\n}\n\n#efumidugxw .gt_center {\n  text-align: center;\n}\n\n#efumidugxw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#efumidugxw .gt_font_normal {\n  font-weight: normal;\n}\n\n#efumidugxw .gt_font_bold {\n  font-weight: bold;\n}\n\n#efumidugxw .gt_font_italic {\n  font-style: italic;\n}\n\n#efumidugxw .gt_super {\n  font-size: 65%;\n}\n\n#efumidugxw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#efumidugxw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#efumidugxw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#efumidugxw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#efumidugxw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#efumidugxw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#efumidugxw .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Dataset\">Dataset</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Percent Change\">Percent Change</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">1</td>\n<td headers=\"Percent Change\" class=\"gt_row gt_right\">44.6%</td></tr>\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">2</td>\n<td headers=\"Percent Change\" class=\"gt_row gt_right\">49.7%</td></tr>\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">3</td>\n<td headers=\"Percent Change\" class=\"gt_row gt_right\">99.8%</td></tr>\n    <tr><td headers=\"Dataset\" class=\"gt_row gt_right\">4</td>\n<td headers=\"Percent Change\" class=\"gt_row gt_right\">12.5%</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n:::\n\nWhile the visual relationship between `covariate` and `exposure` is not identical between datasets, all have the same correlation.\nin @fig-causal_quartet_covariate, dataset 4 seems to have more variance in `covariate`, but that's not actionable information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncausal_quartet |> \n  # hide the dataset names\n  mutate(dataset = as.integer(factor(dataset))) |> \n  ggplot(aes(covariate, exposure)) + \n  geom_point() + \n  geom_smooth(method = \"lm\", se = FALSE) + \n  facet_wrap(~ dataset)\n```\n\n::: {.cell-output-display}\n![The correlation is the same in each dataset, but the visual relationship is not. This is not enough information to determine whether `covariate` is a confounder, mediator, or collider, however.](06-not-just-a-stats-problem_files/figure-html/fig-causal_quartet_covariate-1.png){#fig-causal_quartet_covariate width=672}\n:::\n:::\n\n\nRevealing the labels in @fig-causal_quartet, `covariate` plays a different role in each dataset.\nIn 1 and 4, it's a collider (we *shouldn't* adjust for it).\nIn 2, it's a confounder (we *should* adjust for it).\nIn 3, it's a mediator (it depends on the research question).\nIf the data can't tell us the answer, what can we do?\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncausal_quartet |> \n  ggplot(aes(exposure, outcome)) + \n  geom_point() + \n  geom_smooth(method = \"lm\", se = FALSE) + \n  facet_wrap(~ dataset)\n```\n\n::: {.cell-output-display}\n![The Causal Quartet, revealed. The first and last datasets are types of collider-bias; we should *not* control for `covariate`. In the second dataset, `covariate` is a confounder, and we *should* control for it. In the third dataset, `covariate` is a mediator, and we should control for it if we want the total effect, but not if we want the direct effect.](06-not-just-a-stats-problem_files/figure-html/fig-causal_quartet-1.png){#fig-causal_quartet width=672}\n:::\n:::\n\n\nThe best answer is to have a good sense of the data generating mechanism.\nIn @fig-quartet-dag, we show the DAG for each dataset. Once we compile a DAG for each dataset, we only need to query the DAG for the correct adjustment set, assuming the DAG is right.\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![The DAG for dataset 1, where `covariate` is a collider. We should *not* adjust for `covariate`, which is a descendant of `exposure` and `outcome`.](06-not-just-a-stats-problem_files/figure-html/fig-quartet-dag-1.png){#fig-quartet-dag-1 width=288}\n:::\n\n::: {.cell-output-display}\n![The DAG for dataset 2, where `covariate` is a confounder. `covariate` is a mutual cause of `exposure` and `outcome`, representing a backdoor path, so we *must* adjust for it to get the right answer.](06-not-just-a-stats-problem_files/figure-html/fig-quartet-dag-2.png){#fig-quartet-dag-2 width=288}\n:::\n\n::: {.cell-output-display}\n![The DAG for dataset 3, where `covariate` is a mediator. `covariate` is a descendant of `exposure` and a cause of `outcome`. The path through `covariate` is the indirect path, and the path through `exposure` is the direct path. We should adjust for `covariate` if we want the direct effect, but not if we want the total effect.](06-not-just-a-stats-problem_files/figure-html/fig-quartet-dag-3.png){#fig-quartet-dag-3 width=288}\n:::\n\n::: {.cell-output-display}\n![The DAG for dataset 4, where `covariate` is a collider via M-Bias. Although `covariate` happens before both `outcome` and `exposure`, it's still a collider. We should *not* adjust for `covariate`, particularly since we can't control for the bias via `u1` and `u2`, which are unmeasured.](06-not-just-a-stats-problem_files/figure-html/fig-quartet-dag-4.png){#fig-quartet-dag-4 width=288}\n:::\n:::\n\n\nThe data generating mechanism[^1] in the DAGs matches what was actually used to generate the datasets, so we can use the DAGs to determine the correct effect: `unadjusted` in datasets 1 and 4 and `adjusted` in dataset 2. For dataset 3, it depends on which mediation effect we want: `adjusted` for the direct effect and `unadjusted` for the total effect.\n\n[^1]: See @dagostinomcgowan2023 for the models that generated the datasets.\n\n\n::: {#tbl-quartets_true_effects .cell tbl-cap='The data generating mechanism and true causal effects in each dataset. Sometimes, the unadjusted effect is the same, and sometimes it is not, depending on the mechanism and question.'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zlqbiopunh\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zlqbiopunh table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zlqbiopunh thead, #zlqbiopunh tbody, #zlqbiopunh tfoot, #zlqbiopunh tr, #zlqbiopunh td, #zlqbiopunh th {\n  border-style: none;\n}\n\n#zlqbiopunh p {\n  margin: 0;\n  padding: 0;\n}\n\n#zlqbiopunh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zlqbiopunh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zlqbiopunh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zlqbiopunh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zlqbiopunh .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zlqbiopunh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zlqbiopunh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zlqbiopunh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zlqbiopunh .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zlqbiopunh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zlqbiopunh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zlqbiopunh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zlqbiopunh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zlqbiopunh .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zlqbiopunh .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zlqbiopunh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zlqbiopunh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zlqbiopunh .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zlqbiopunh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zlqbiopunh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zlqbiopunh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zlqbiopunh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zlqbiopunh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zlqbiopunh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zlqbiopunh .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zlqbiopunh .gt_left {\n  text-align: left;\n}\n\n#zlqbiopunh .gt_center {\n  text-align: center;\n}\n\n#zlqbiopunh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zlqbiopunh .gt_font_normal {\n  font-weight: normal;\n}\n\n#zlqbiopunh .gt_font_bold {\n  font-weight: bold;\n}\n\n#zlqbiopunh .gt_font_italic {\n  font-style: italic;\n}\n\n#zlqbiopunh .gt_super {\n  font-size: 65%;\n}\n\n#zlqbiopunh .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zlqbiopunh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zlqbiopunh .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zlqbiopunh .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zlqbiopunh .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zlqbiopunh .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zlqbiopunh .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Data generating mechanism\">Data generating mechanism</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Correct causal model\">Correct causal model</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Correct causal effect\">Correct causal effect</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Data generating mechanism\" class=\"gt_row gt_left\">(1) Collider</td>\n<td headers=\"Correct causal model\" class=\"gt_row gt_left\">Y ~ X</td>\n<td headers=\"Correct causal effect\" class=\"gt_row gt_left\">1</td></tr>\n    <tr><td headers=\"Data generating mechanism\" class=\"gt_row gt_left\">(2) Confounder</td>\n<td headers=\"Correct causal model\" class=\"gt_row gt_left\">Y ~ X ; Z</td>\n<td headers=\"Correct causal effect\" class=\"gt_row gt_left\">0.5</td></tr>\n    <tr><td headers=\"Data generating mechanism\" class=\"gt_row gt_left\">(3) Mediator</td>\n<td headers=\"Correct causal model\" class=\"gt_row gt_left\">Direct effect: Y ~ X ; Z, Total Effect: Y ~ X</td>\n<td headers=\"Correct causal effect\" class=\"gt_row gt_left\">Direct effect: 0, Total effect: 1</td></tr>\n    <tr><td headers=\"Data generating mechanism\" class=\"gt_row gt_left\">(4) M-Bias</td>\n<td headers=\"Correct causal model\" class=\"gt_row gt_left\">Y ~ X</td>\n<td headers=\"Correct causal effect\" class=\"gt_row gt_left\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n## Time as a hueristic for causal structure\n\nHopefully, we have convinced of the usefulness of DAGs. But how do we know what the DAG is? In the causal quartet, we knew the DAGs because we generated the data. In real life, we need to use background knowledge to assemble a candidate causal structure. For some questions, such background knowledge is not available. For others, we may worry about the complexity of the causal structure, particularly when variables mutually evolve with each other, as in @fig-feedback-loop.\n\nThere is one hueristic that is particularly useful when a DAG is incomplete or uncertain: time. Because causality is temporal in nature, a causal variable must precede an effect. Many, but not all, problems in deciding if we should adjust for a confounder are solved by simply putting the variables in order by time. Time ordering is also one of the most critical assumptions you visualize in a DAG, so it's a good place to start regardless of the completeness of the DAG.\n\nConsider @fig-quartets_time_ordered, a time-ordered version of the collider DAG where the covariate is measured at baseline and follow-up. The original DAG actually represents the *second* measurement, where the covariate is a descendant of both the outcome and exposure. If, however, we control for the same covariate as measured at the start of the study, it cannot be a descendant of the outcome at follow-up because it hasn't happened yet. Thus, when you are missing background knowledge as to the causal structure of the covariate, you can use time-ordering as a defensive measure to avoid bias. Only control for variables that precede the outcome.\n\n\n::: {.cell layout-ncol=\"2\"}\n::: {.cell-output-display}\n![In a time-ordered version of the collider DAG, controlling for the covariate at follow-up induces bias.](06-not-just-a-stats-problem_files/figure-html/fig-quartets_time_ordered-1.png){#fig-quartets_time_ordered-1 width=384}\n:::\n\n::: {.cell-output-display}\n![On the other hand, controlling for the covariate as measured at baseline does not induce bias because it is not a descendant of the outcome.](06-not-just-a-stats-problem_files/figure-html/fig-quartets_time_ordered-2.png){#fig-quartets_time_ordered-2 width=384}\n:::\n:::\n\n\n::: {.callout-warning}\n## Don't adjust for the future\n\nThe time-ordering heuristic relies on a simple rule: don't adjust for the future. \n:::\n\nThe quartet package's `causal_quartet_time` has time-ordered measurements of each variable for the four datasets. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Table 3\n\ntbl_3 <- causal_quartet_time |>\n  nest_by(dataset) |>\n  mutate(adjusted_effect = \n             coef(\n               lm(outcome_followup ~ exposure_baseline + covariate_baseline, \n                  data = data)\n             )[2]) |>\n  bind_cols(tibble(truth = c(1, 0.5, 1, 1))) |>\n  select(-data, dataset)\n```\n:::\n\n\n## Causal and Predictive Models, Revisited {#sec-causal-pred-revisit}\n\n<!-- TODO:  -->\n\n<!-- -   Probably too long, but if possible, condense to a popout -->\n\n<!-- -   DAGs showing examples where prediction can lean on measured confounders, colliders. It's the amount of information a variable brings, not whether the coeffecient is unbiased affect of variable on outcome. -->\n\n<!-- -   Not practical to fit a prediction model with future variable -->\n\n<!-- -   Table 2 Bias examples. Unmeasure confounding of Z-Y relationship. Mediation example. -->\n",
    "supporting": [
      "06-not-just-a-stats-problem_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}